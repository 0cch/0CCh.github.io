<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <link rel="icon" href="/favicon.ico">
  
  <title>0CCh Blog</title>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/lib/fancybox/jquery.fancybox-1.3.4.css">
  <!--在这里倒入jquery 方便处理部分页面的jquery-->
  <script src="https://cdn.staticfile.org/jquery/1.7/jquery.min.js" type="text/javascript" ></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body class="home">
	<!-- hexo-inject:begin --><!-- hexo-inject:end --><header class="site-header navfixed-false">
  <div class="container">
      <h1><a href="/" title="0CCh Blog"><span class="octicon octicon-mark-github"></span> 0CCh Blog</a></h1>
      <nav class="site-header-nav" role="navigation">
        
              
              <a href="/"  class=" site-header-nav-item hvr-underline-from-center" title="Home">Home</a>
        
              
              <a href="/categories/"  class=" site-header-nav-item hvr-underline-from-center" title="Category">Category</a>
        
              
              <a href="/open-source/"  class=" site-header-nav-item hvr-underline-from-center" title="Open-Source">Open-Source</a>
        
      </nav>
  </div>
</header>

	<section class="banner-false">
    <div class="collection-head">
        <div class="container">
            <div class="collection-title">
                <h1 class="collection-header" id="site-description">
                    
                </h1>
                <div class="collection-info">
                    
                    
                        <span class="meta-info">
                            
                                <span class="octicon octicon-location">
                                   
                                        China
                                    
                                </span>
                                
                            
                        </span>
                    
                        <span class="meta-info">
                            
                                <span class="octicon octicon-mark-github">
                                   
                                </span>
                                
                                    <a href="http://github.com/0cch" target="_blank">0cch</a>
                                
                            
                        </span>
                    
                </div>
            </div>
        </div>
    </div>
</section>
	   <section class="container">
    <div class="columns">
        <div class="column two-thirds">
            
                  <article id="post-e585b3e4ba8ezone-identifiere79a84e4b880e782b9e8aeb0e5bd95" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/06/15/e585b3e4ba8ezone-identifiere79a84e4b880e782b9e8aeb0e5bd95/">关于Zone.Identifier的一点记录</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>自从Windows XP SP2开始，微软对文件加入了Zone.Identifier的数据流，所以这个也不算什么新东西了，最近偶然有机会研究了下所以就记录了下来。<br>说起Zone.Identifier，我们最常见的应用就是在我们从Internet上下载了可执行文件后，运行的时候会弹出如下图的警告窗口：</p>
<p><a href="/uploads/2015/06/20150615150628.png"><img src="/uploads/2015/06/20150615150628.png" alt="20150615150628"></a></p>
<p>弹出这个窗口就是因为Explorer在运行这个文件的时候先检查了Zone.Identifier的数据，发现了如下文本<br>[ZoneTransfer]<br>ZoneId=3</p>
<p>这个ZoneId=3，就是指明这个文件是由Internet上下载的。根据MSDN，这个id有以下几种：</p>
<pre><code>
typedef enum tagURLZONE { 
  URLZONE_INVALID         = -1,
  URLZONE_PREDEFINED_MIN  = 0,
  URLZONE_LOCAL_MACHINE   = 0,
  URLZONE_INTRANET,
  URLZONE_TRUSTED,
  URLZONE_INTERNET,
  URLZONE_UNTRUSTED,
  URLZONE_PREDEFINED_MAX  = 999,
  URLZONE_USER_MIN        = 1000,
  URLZONE_USER_MAX        = 10000
} URLZONE; </code></pre>
<p>查看这个数据流的方法也很简单，用notepad就行了。</p>
<p><a href="/uploads/2015/06/20150615153805.png"><img src="/uploads/2015/06/20150615153805.png" alt="20150615153805"></a></p>
<p>另外如果想给添加或者去除这个数据流，我们这里有两种方法：<br>1.直接读写数据流，其实这个跟普通文件读写没什么两样。<br>2.调用微软提供的com接口，这个比较是规范的。  </p>
<p>对于第一种方法，没什么可说的，无非就是文件操作的那些API。第二种方法我们需要用到以下两个接口：<br>IPersistFile<br>IZoneIdentifier</p>
<p>我们先创建IZoneIdentifier接口，然后query出IPersistFile打开文件，最后读取或者写入文件。<br>代码详见：<a href="http://blogs.msdn.com/b/oldnewthing/archive/2013/11/04/10463035.aspx" target="_blank" rel="external">http://blogs.msdn.com/b/oldnewthing/archive/2013/11/04/10463035.aspx</a></p>
<p>最后说一下，之所以能有Zone.Identifier这种功能，完全依赖于NTFS文件系统，它允许多个数据流的存在，对它而言，每个数据流无非就是一个属性而已，只不过Zone.Identifier是一个名字为Zone.Identifier的数据流，而文件本身的数据是一个没有命名的数据流而已。用ntfs_study查看，如下图，第一个Data数据没有名字是文件本身的数据，第二个就是Zone.Identifier的数据了。<br><a href="/uploads/2015/06/20150615160110.png"><img src="/uploads/2015/06/20150615160110.png" alt="20150615160110"></a></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-06-15T00:07:03.000Z" itemprop="datePublished">2015-06-15</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/NTInternals/' title=''>NTInternals</a><a href='/categories/NTInternals/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-windows-8-spellchecking-api" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/05/18/windows-8-spellchecking-api/">Windows 8 SpellChecking API</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>在Windows 8下，多了一套很有趣的API，SpellChecking，这套API的作用也是一目了然，是做拼写检查的。这么有趣的一套API怎么能不写个程序玩玩呢，于是我写了个小程序，看了看对英文拼写检查的效果，如图。<br><a href="/uploads/2015/05/20150518202121.png"><img src="/uploads/2015/05/20150518202121.png" alt="20150518202121"></a><br>拼写检查会给出三个结果，分别是删除，替换和建议，根据不同的结果我们可以调用不同的接口来获得最佳的体验。代码如下：</p>
<pre><code>&#x2F;&#x2F; SpellCheck.cpp : Defines the entry point for the console application.
&#x2F;&#x2F;

#include &quot;stdafx.h&quot;
#include &lt;atlbase.h&gt;
#include &lt;atlstr.h&gt;
#include &lt;Spellcheck.h&gt;
class CCoInitialize {
public:
	CCoInitialize() {
		CoInitializeEx(NULL, COINIT_MULTITHREADED);
	}
	~CCoInitialize() { CoUninitialize(); }
};

LPCWSTR kActionStrings[] = {
	L&quot;CORRECTIVE_ACTION_NONE&quot;,
	L&quot;CORRECTIVE_ACTION_GET_SUGGESTIONS&quot;,
	L&quot;CORRECTIVE_ACTION_REPLACE&quot;,
	L&quot;CORRECTIVE_ACTION_DELETE&quot;
};

int _tmain(int argc, _TCHAR* argv[])
{
	CCoInitialize com_init;
	CComPtr spell_checker_factory;
	HRESULT hr = CoCreateInstance(__uuidof(SpellCheckerFactory), NULL, CLSCTX_INPROC_SERVER, __uuidof(spell_checker_factory),
		reinterpret_cast(&amp;spell;_checker_factory));
	if (FAILED(hr)) {
		return 1;
	}

	LPCWSTR lang_tag = L&quot;en-US&quot;;
	BOOL suppored = FALSE;
	spell_checker_factory-&gt;IsSupported(lang_tag, &amp;suppored;);
	if (!suppored) {
		return 1;
	}

	CComPtr spell_checker;
	hr = spell_checker_factory-&gt;CreateSpellChecker(lang_tag, &amp;spell;_checker);
	if (FAILED(hr)) {
		return 1;
	}

	WCHAR my_text[] = L&quot;Helloo world, I am am new heere, hvae fun&quot;;
	wprintf(L&quot;%s\n\n&quot;, my_text);
	CComPtr spell_errors;
	hr = spell_checker-&gt;Check(my_text, &amp;spell;_errors);
	if (FAILED(hr)) {
		return 1;
	}

	CComPtr spell_error;
	while (spell_errors-&gt;Next(&amp;spell;_error) == S_OK) {
		ULONG index, length;
		if (SUCCEEDED(spell_error-&gt;get_StartIndex(&amp;index;)) &amp;&amp; SUCCEEDED(spell_error-&gt;get_Length(&amp;length;))) {
			CStringW tmp_str(my_text + index, length);
			wprintf(L&quot;%-10s    &quot;, tmp_str.GetString());

			CORRECTIVE_ACTION action;
			if (SUCCEEDED(spell_error-&gt;get_CorrectiveAction(&amp;action;))) {
				wprintf(L&quot;%-40s    &quot;, kActionStrings[action]);
			}

			if (action == CORRECTIVE_ACTION_DELETE) {
				wprintf(L&quot;delete %s\n&quot;, tmp_str.GetString());
			}
			else if (action == CORRECTIVE_ACTION_GET_SUGGESTIONS) {
				CComPtr spell_suggestions;
				hr = spell_checker-&gt;Suggest(tmp_str.GetString(), &amp;spell;_suggestions);
				if (FAILED(hr)) {
					break;;
				}

				WCHAR *suggestion_str;
				while (spell_suggestions-&gt;Next(1, &amp;suggestion;_str, NULL) == S_OK) {
					wprintf(L&quot;%s &quot;, suggestion_str);
					CoTaskMemFree(suggestion_str);
				}
				wprintf(L&quot;\n&quot;);
			}
			else if (action == CORRECTIVE_ACTION_REPLACE) {
				WCHAR *replace_str;
				hr = spell_error-&gt;get_Replacement(&amp;replace;_str);
				wprintf(L&quot;%s\n&quot;, replace_str);
				CoTaskMemFree(replace_str);
			}
		}

		spell_error.Release();
	}

	return 0;
}


 </code></pre>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-05-18T04:30:35.000Z" itemprop="datePublished">2015-05-18</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-windows-8-1-genericmappinge5afb9e5ba94e79a84access_mask" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/05/01/windows-8-1-genericmappinge5afb9e5ba94e79a84access_mask/">Windows 8.1 GenericMapping对应的ACCESS_MASK</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>我们在创建或者打开对象的时候需要指定ACCESS_MASK，有的时候为了方便，我们会在ACCESS_MASK的参数中填GenericRead,GenericWrite这样的值，那么对于这些对象来说，这些GenericXXX究竟是什么样的ACCESS_MASK都是保存在对象的GenericMapping中，以下就是Windows 8.1中所有对象的GenericMapping了。<br><a href="/uploads/2015/05/20150502010045.png"><img src="/uploads/2015/05/20150502010045.png" alt="20150502010045"></a></p>
<p>将ACCESS_MASK数字转换成我们看得懂的宏，可以使用我写的一个小网页：<br><a href="http://0cch.com/accessmask.html">http://0cch.com/accessmask.html</a></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-05-01T09:06:17.000Z" itemprop="datePublished">2015-05-01</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-memmapview-e69fa5e79c8be585b1e4baabe58685e5ad98e698a0e5b084e79a84e5b7a5e585b7" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/04/18/memmapview-e69fa5e79c8be585b1e4baabe58685e5ad98e698a0e5b084e79a84e5b7a5e585b7/">MemMapView —— 查看共享内存映射的工具</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>MemMapView是一个查看Named Shared Memory的工具，它能够枚举系统中的命名共享内存的名称，并且浏览其数据。</p>
<p><a href="/uploads/2015/04/20150418234836.png"><img src="/uploads/2015/04/20150418234836.png" alt="20150418234836"></a></p>
<p>下载：<a href="/uploads/2015/04/MemMapView.zip">MemMapView</a></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-04-18T07:56:03.000Z" itemprop="datePublished">2015-04-18</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Debugging/' title=''>Debugging</a><a href='/categories/Debugging/NTInternals/' title=''>NTInternals</a><a href='/categories/Debugging/NTInternals/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-e998b2e6ada2global-windows-hookse6b3a8e585a5e79a84e4b880e4b8aae696b9e6b395" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/04/10/e998b2e6ada2global-windows-hookse6b3a8e585a5e79a84e4b880e4b8aae696b9e6b395/">防止Global Windows Hooks注入的一个方法</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>我们都知道SetWindowsHookEx可以设置全局钩子，让自己的dll注入到有窗口的进程中去。注入原理就不再赘述了，网上资料很多，简单看一下调用堆栈方便我们说明怎么去防注入。<br>kernel32!LoadLibraryExW<br>USER32!__ClientLoadLibrary<br>ntdll!KiUserCallbackDispatcher<br>nt!KiCallUserMode<br>nt!KeUserModeCallback<br>win32k!ClientLoadLibrary<br>win32k!xxxLoadHmodIndex<br>win32k!xxxCallHook2<br>win32k!xxxCallHook<br>win32k!xxxCreateWindowEx<br>win32k!NtUserCreateWindowEx<br>nt!KiFastCallEntry<br>ntdll!KiFastSystemCallRet<br>ntdll!KiUserCallbackDispatcher<br>USER32!NtUserCreateWindowEx<br>USER32!_CreateWindowEx  </p>
<p>看着个堆栈，防注入的方法这里就可以大概说出三种：  </p>
<ol>
<li>被创建窗口程序了。  </li>
<li>Hook LoadLibraryExW，判断是否是自己的模块。  </li>
<li>Hook __ClientLoadLibrary，替换为空函数。  </li>
</ol>
<p>第一个方法其实也谈不上方法，也就是说控制台程序就不用担心这些了。第二个方法需要是否是判断自己的模块，这个方法也挺麻烦的，因为你得放过一些不是自己的模块，比如微软的模块。所以这里重点说第三个方法，我们去Hook <strong>ClientLoadLibrary，这样我们就只是避免了全局钩子的注入了。这里我们不用去Inline Hook该函数，Inline Hook比较麻烦。我们的做法是修改user32!apfnDispatch这个数组，直接替换对应于</strong>ClientLoadLibrary所在位置的值。这样摆在我们面前的稍微麻烦一点的事情有两个，一个是确定数组开始的地址，第二就是确定__ClientLoadLibrary在数组中的index。<br>那么分别来解决这两个问题：</p>
<ol>
<li><p>组数的位置<br>其实就是PEB的KernelCallbackTable，虽然PEB没有文档化，但是也没见过他变过什么。所以我们可以写死KernelCallbackTable的偏移。说稍微有点麻烦就是指的，这个偏移在32bit和64bit的系统上是不同的而已，32位系统的偏移是0x2c，64位系统是0x58。另外一个就是获得PEB的方法了，32位程序你既可以写点汇编从fs中获取，也能调用<strong>readfsdword获得，64位程序会麻烦点，你需要先获得TEB，然后从TEB里得到PEB，至于获得TEB的方法，你可以直接调用</strong>readgsqword获得，也可以调用ntdll的NtCurrentTeb获得。</p>
</li>
<li><p><strong>ClientLoadLibrary在数组中的index<br>这个就稍微繁琐点，我们需要把我们关心的系统用windbg带上符号都看一眼才能知道是多少了。<br>我这里提供几个常用系统中</strong>ClientLoadLibrary在数组中的index：<br>XP=0x42，Win7=0x41，Win8.1=0x47</p>
</li>
</ol>
<p>好了，知道了这些，后面的就不用说太详细了，无非就是这三步：  </p>
<ol>
<li>写个空的__ClientLoadLibrary函数MyClientLoadLibrary。  </li>
<li>VirtualProtect设置KernelCallbackTable + index * sizeof(PVOID)地址内存保护属性为PAGE_READWRITE。  </li>
<li>替换__ClientLoadLibrary为MyClientLoadLibrary，再把内存属性换回原来的。  </li>
</ol>
<p>OK，大功告成了。</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-04-10T08:56:02.000Z" itemprop="datePublished">2015-04-10</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/NTInternals/' title=''>NTInternals</a><a href='/categories/NTInternals/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-e58f91e78eb0file-system-minifiltere79a84e4b880e5a484e997aee9a298" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/03/26/e58f91e78eb0file-system-minifiltere79a84e4b880e5a484e997aee9a298/">发现File System Minifilter的一处问题</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>这两天有个朋友一直问我用用户普通权限连接minifilter server port的问题。给他解答的同时，也发现了这个方面的一个问题。首先说用普通用户权限连接port的方法，其实就是设置FltCreateCommunicationPort参数里ObjectAttributes的SecurityDescriptor，加入everyone的ACE就行了。那么加入everyone的ace你就要指定一个ACCESS_MASK，在MSDN里，介绍了两个可以使用的MASK</p>
<p><a href="/uploads/2015/03/20150326155009.png"><img src="/uploads/2015/03/20150326155009.png" alt="20150326155009"></a></p>
<p>其中FLT_PORT_CONNECT=1，FLT_PORT_ALL_ACCESS=1F0001。看到这里，多数人都可能会认为如果只想让everyone连接上去，不给他所用权限，那么在这个ACE里加入FLT_PORT_CONNECT就可以了。然后就掉到微软的坑里了，和我那个朋友一样:)。</p>
<p><a href="/uploads/2015/03/20150326154028.png"><img src="/uploads/2015/03/20150326154028.png" alt="20150326154028"></a></p>
<p>实际上指定FLT_PORT_CONNECT会让R3的程序无法连接驱动的port，原因就是FilterConnectCommunicationPort函数没有让你指定你需求的ACCESS，而是在底层打开port的时候直接请求FLT_PORT_ALL_ACCESS。这个时候如果你的ACE里面是FLT_PORT_CONNECT，那当然无法连接上去了。所以这里把ACE里的ACCESS_MASK设置为FLT_PORT_ALL_ACCESS就行了。</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-03-26T00:08:33.000Z" itemprop="datePublished">2015-03-26</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/NTInternals/' title=''>NTInternals</a><a href='/categories/NTInternals/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-windbge69fa5e79c8bobject-hooke79a84e8849ae69cac" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/03/24/windbge69fa5e79c8bobject-hooke79a84e8849ae69cac/">Windbg查看Object Hook的脚本</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>学好Windbg，基本上可以代替很多工具，这次分享一个查看Object Hook的脚本：</p>
<pre><code>r @$t0 = 2;
r? @$t1 = ((nt!_OBJECT_TYPE**)@@(nt!ObTypeIndexTable))[@$t0];

.while ((@$t1 &amp; 0xffffffff) != 0) {
	.printf &quot;Type Name:%-20msu\t&quot;, @@C++(&amp;@$t1-&gt;Name);
	.printf &#x2F;D &quot;detail\n&quot;, @$t1;
	.printf &quot;DumpProcedure        : %y\n&quot;, @@C++(@$t1-&gt;TypeInfo.DumpProcedure);
	.printf &quot;OpenProcedure        : %y\n&quot;, @@C++(@$t1-&gt;TypeInfo.OpenProcedure);
	.printf &quot;CloseProcedure       : %y\n&quot;, @@C++(@$t1-&gt;TypeInfo.CloseProcedure);
	.printf &quot;DeleteProcedure      : %y\n&quot;, @@C++(@$t1-&gt;TypeInfo.DeleteProcedure);
	.printf &quot;ParseProcedure       : %y\n&quot;, @@C++(@$t1-&gt;TypeInfo.ParseProcedure);
	.printf &quot;SecurityProcedure    : %y\n&quot;, @@C++(@$t1-&gt;TypeInfo.SecurityProcedure);
	.printf &quot;QueryNameProcedure   : %y\n&quot;, @@C++(@$t1-&gt;TypeInfo.QueryNameProcedure);
	.printf &quot;OkayToCloseProcedure : %y\n\n&quot;, @@C++(@$t1-&gt;TypeInfo.OkayToCloseProcedure);
	
	r @$t0 = @$t0 + 1;
	r? @$t1 = ((nt!_OBJECT_TYPE**)@@(nt!ObTypeIndexTable))[@$t0];
};
 </code></pre>
<p><a href="/uploads/2015/03/20150324095806.png"><img src="/uploads/2015/03/20150324095806.png" alt="20150324095806"></a></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-03-23T18:08:18.000Z" itemprop="datePublished">2015-03-24</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-e4b880e4b8aae8a7a3e69e90inie69687e4bbb6e79a84e7b1bb" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/03/17/e4b880e4b8aae8a7a3e69e90inie69687e4bbb6e79a84e7b1bb/">一个解析INI文件的类</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>虽然微软强烈推荐用注册表代替ini来记录软件配置，但是由于写ini文件的方便性和可读性的优势，还是让很多程序员选择把配置记录到ini文件中。但是用Windows API操作ini文件有个缺点，就是每次调用如GetPrivateProfileInt，WritePrivateProfileString等函数，都会产生一次文件打开关闭以及读写操作，并且对ini文件重新解析，这是非常低效的。所以如果需要大量的操作ini文件，例如需要读取很多配置信息以启动软件，那么这样的用法无疑会增加软件的冷启动时间。为了解决这个问题，我们就需要自己写一个模块，他能够一次性读取并且解析好ini文件。在需要读取的时候直接从内存读取，需要些的时候先全部写到内存里，最后在刷新到文件上。所以我写了一个ParseIni的类，来完成这个工作。代码如下：</p>
<pre><code>#ifndef __PARSE_INI_H__
#define __PARSE_INI_H__

#include &lt;vector&gt;
#include &lt;string&gt;
#include &lt;fstream&gt;
#include &lt;windows.h&gt;

#define INI_KEY_LINE			1
#define INI_SECTION_LINE		2
#define INI_COMMENT_LINE		3
#define INI_NC_KEY_LINE			4
#define INI_WORNG_SYNTAX		0

using namespace std;


class CParseIniA {

public:
	CParseIniA() {}
	~CParseIniA() {}

	BOOL Open(const string &amp;IniPath;, BOOL OpenAlways = TRUE);
	vector EnumSectionNames();
	vector EnumKeyNamesInSection(const string &amp;SectionName;);
	string GetSectionKeyValue(const string &amp;SectionName;, const string &amp;KeyName;, const string &amp;DefaultValue;);
    int GetSectionKeyValueInt(const string &amp;SectionName;, const string &amp;KeyName;, int DefaultValue);
    BOOL SetSectionKeyValueInt(const string &amp;SectionName;, const string &amp;KeyName;, int value, BOOL CreateNew = TRUE);
	BOOL SetSectionKeyValue(const string &amp;SectionName;, const string &amp;KeyName;, const string &amp;Value;, BOOL CreateNew = TRUE);
	BOOL Flush();
	VOID Close();

private:
	ULONG SyntaxCheck(const string &amp;KeyLine;);
	vector::iterator CreateSection(const string &amp;SectionName;);
	VOID CreateKeyValue(vector::iterator it, const string &amp;KeyName;, const string &amp;Value;);
	BOOL IsSection(string &amp;Line;);
	BOOL SetKeyValue(string &amp;Line;, const string &amp;Value;);
	string GetKeyValue(string &amp;Line;);
	string GetSectionName(string &amp;Line;);
	string GetKeyName(string &amp;Line;);
	string trim(const string&amp; s ,const string&amp; drop = &quot; &quot;);
	vector m_IniContext; 
	string m_IniPath;
};

inline BOOL CParseIniA::Open( const string &amp;IniPath;, BOOL OpenAlways)
{
	ifstream IniFile(IniPath.c_str());
	INT FileSize;
	vector::iterator it;
	

	if (!IniFile.is_open()) {

		if (!OpenAlways) {

			return FALSE;
		}

		m_IniPath = IniPath;

		return TRUE;

	}

	m_IniPath = IniPath;

	IniFile.seekg(0, std::ios_base::end);
	FileSize = IniFile.tellg();
	IniFile.seekg(0, std::ios_base::beg);
	if (FileSize == 0) {

		return TRUE;
	}
	

	while (IniFile) {
		string IniLine;
		getline(IniFile, IniLine);

		m_IniContext.push_back(IniLine);
	}

	it = m_IniContext.end();
    it--;
	while (trim(*it).empty()) {

		m_IniContext.pop_back();
		it = m_IniContext.end();
        it--;
	}
	
	return TRUE;
}

inline BOOL CParseIniA::IsSection( string &amp;Line; )
{
	string SectionLine = trim(Line);
	BOOL Ret = FALSE;
	
	if (SectionLine[0] == &#39;[&#39; &amp;&amp; SectionLine[SectionLine.length() - 1] == &#39;]&#39;) {

		Ret = TRUE;
	}

	return Ret;
}

inline vector CParseIniA::EnumSectionNames()
{
	vector SectionNames;
	vector::iterator it;

	for (it = m_IniContext.begin(); it != m_IniContext.end(); ++it) {

		if (IsSection(*it)) {

			SectionNames.push_back(GetSectionName(*it));
		}
	}

	return SectionNames;
}

inline vector CParseIniA::EnumKeyNamesInSection(const string &amp;SectionName; )
{
	vector::iterator it;
	vector KeyNames;
	ULONG ScanState = 0;

	for (it = m_IniContext.begin(); it != m_IniContext.end(); ++it) {

		if (ScanState == 0) {

			if (!IsSection(*it) || GetSectionName(*it) != SectionName) {

				continue;
			}

			ScanState = 1;
		}
		else if (ScanState == 1) {

			if (IsSection(*it)) {

				break;
			}

			KeyNames.push_back(GetKeyName(*it));
		}
	}

	return KeyNames;
}

inline string CParseIniA::GetSectionName( string &amp;Line; )
{
	INT Count = Line.length();
	INT i;
	BOOL Start = FALSE;
	string SectionName;

	for (i = 0; i &lt; Count; i++) {

		if (Line[i] == &#39;[&#39;) {

			Start = TRUE;
		}
		else if (Line[i] == &#39;]&#39;) {

			if (Start) {

				break;
			}
		}
		else {

			if (Start) {

				SectionName += Line[i];
				continue;
			}
		}
	}

	return SectionName;
}

inline string CParseIniA::GetKeyName( string &amp;Line; )
{
	string KeyName;

	KeyName = Line.substr(0, Line.find_first_of(&#39;=&#39;));

	return trim(KeyName);
}

inline string CParseIniA::trim(const string&amp; s, const string&amp; drop)
{
	string t(s);
	string r = t.erase(t.find_last_not_of(drop) + 1);
	return r.erase(0,r.find_first_not_of(drop));
}


inline int CParseIniA::GetSectionKeyValueInt( const string &amp;SectionName;, const string &amp;KeyName;, int DefaultValue )
{
    char DefaultValueString[32] = {0};
    sprintf_s(DefaultValueString, &quot;%d&quot;, DefaultValue);
    string ValueString = GetSectionKeyValue(SectionName, KeyName, DefaultValueString);
    return atoi(ValueString.c_str());
}

inline string CParseIniA::GetSectionKeyValue(const string &amp;SectionName;, const string &amp;KeyName;, const string &amp;DefaultValue; )
{
	vector::iterator it;
	ULONG ScanState = 0;
	string Value = DefaultValue;

	for (it = m_IniContext.begin(); it != m_IniContext.end(); ++it) {

		if (ScanState == 0) {

			if (!IsSection(*it) || GetSectionName(*it) != SectionName) {

				continue;
			}

			ScanState = 1;
		}
		else if (ScanState == 1) {

			if (IsSection(*it)) {

				break;
			}

			if (SyntaxCheck(*it) != INI_KEY_LINE) {

				continue;
			}

			if (GetKeyName(*it) == KeyName) {

				Value = GetKeyValue(*it);
			}
		}
	}

	return Value;
}

inline string CParseIniA::GetKeyValue( string &amp;Line; )
{
	string KeyName;

	KeyName = Line.substr(Line.find_first_of(&#39;=&#39;) + 1);
 
	return trim(KeyName);
}

inline BOOL CParseIniA::SetKeyValue( string &amp;Line;, const string &amp;Value; )
{
	INT Pos = Line.find_first_of(&#39;=&#39;);

	if (Pos == string::npos) {

		return FALSE;
	}

	Pos = Line.find_first_not_of(&#39; &#39;, Pos + 1);

	if (Pos == string::npos) {

		Pos = Line.find_first_of(&#39;=&#39;) + 1;
	}

	Line.erase(Pos);
	Line += Value;

	return TRUE;
}

inline BOOL CParseIniA::SetSectionKeyValueInt( const string &amp;SectionName;, const string &amp;KeyName;, int Value, BOOL CreateNew &#x2F;*= TRUE*&#x2F; )
{
    char ValueString[32] = {0};
    sprintf_s(ValueString, &quot;%d&quot;, Value);
    return SetSectionKeyValue(SectionName, KeyName, ValueString, CreateNew);
}

inline BOOL CParseIniA::SetSectionKeyValue( const string &amp;SectionName;, const string &amp;KeyName;, const string &amp;Value;, BOOL CreateNew )
{
	vector::iterator it;
	ULONG ScanState = 0;
	BOOL Ret = FALSE;

	for (it = m_IniContext.begin(); it != m_IniContext.end(); ++it) {

		if (ScanState == 0) {

			if (!IsSection(*it) || GetSectionName(*it) != SectionName) {

				continue;
			}

			ScanState = 1;
		}
		else if (ScanState == 1) {

			if (IsSection(*it)) {

				break;
			}

			if (SyntaxCheck(*it) == INI_KEY_LINE || SyntaxCheck(*it) == INI_NC_KEY_LINE) {

				if (GetKeyName(*it) == KeyName) {

					Ret = SetKeyValue(*it, Value);
				}
			}
		}
	}

	if (CreateNew &amp;&amp; !Ret) {

		if (ScanState == 0) {

			it = CreateSection(SectionName);
			CreateKeyValue(it, KeyName, Value);
		}
		else if (ScanState == 1) {

			it--;
			CreateKeyValue(it, KeyName, Value);
		}

		Ret = TRUE;
	}

	return Ret;
}

inline BOOL CParseIniA::Flush()
{
	ofstream IniFile(m_IniPath.c_str());
	vector::iterator it;

	if (!IniFile.is_open()) {

		return FALSE;
	}

	for (it = m_IniContext.begin(); it != m_IniContext.end(); ++it) {

		IniFile &lt;&lt; it-&gt;c_str() &lt;&lt; endl;
	}

	return TRUE;
}

inline VOID CParseIniA::Close()
{
}

inline vector::iterator CParseIniA::CreateSection( const string &amp;SectionName; )
{
	string FullSectionName;
	vector::iterator it;

	FullSectionName += &#39;[&#39;;
	FullSectionName += SectionName;
	FullSectionName += &#39;]&#39;;

	m_IniContext.push_back(FullSectionName);
	it = m_IniContext.begin() + m_IniContext.size() - 1;

	return it;
}

inline VOID CParseIniA::CreateKeyValue( vector::iterator it, const string &amp;KeyName;, const string &amp;Value; )
{
	string KeyInfo;

	KeyInfo += KeyName;
	KeyInfo += &quot; = &quot;;
	KeyInfo += Value;
	while (it != m_IniContext.begin()) {

		if (!trim(*it).empty()) {

			break;
		}

		it--;
	}

	m_IniContext.insert(it + 1, KeyInfo);
}

inline ULONG CParseIniA::SyntaxCheck( const string &amp;KeyLine; )
{
	string Line = trim(KeyLine);
	INT Pos, CommentPos1, CommentPos2;
	string KeyName;
	string Value;
	
	if (IsSection(Line)) {

		return INI_SECTION_LINE;
	}
	else if (Line[0] == &#39;;&#39; || Line[0] == &#39;#&#39;) {

		return INI_COMMENT_LINE;
	}
	else {

		Pos = Line.find_first_of(&#39;=&#39;);
		if (string::npos == Pos) {

			return INI_WORNG_SYNTAX;
		}

		KeyName = trim(Line.substr(0, Pos));
		if (KeyName.empty()) {

			return INI_WORNG_SYNTAX;
		}

		Value = trim(Line.substr(Pos + 1));
		if (Value.empty()) {

			return INI_NC_KEY_LINE;
		}

		CommentPos1 = Value.find_first_of(&#39;;&#39;);
		CommentPos2 = Value.find_first_of(&#39;#&#39;);
		if (CommentPos1 == string::npos &amp;&amp; CommentPos2 == string::npos) {

			return INI_KEY_LINE;
		}

		CommentPos1 = CommentPos1 &lt; CommentPos2 ? CommentPos1 : CommentPos2;

		if (Value.erase(CommentPos1).empty()) {

			return INI_NC_KEY_LINE;
		}
		
		return INI_KEY_LINE;
	}
}

#endif
 </code></pre>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-03-17T01:56:04.000Z" itemprop="datePublished">2015-03-17</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-e4bdbfe794a8windowse69caae4bdbfe794a8e58685e5ad98e58e9fe79086e5928ce5ba94e794a8" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/02/02/e4bdbfe794a8windowse69caae4bdbfe794a8e58685e5ad98e58e9fe79086e5928ce5ba94e794a8/">使用Windows未使用内存原理和应用</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p><a href="/uploads/2015/02/20150202104522.png"><img src="/uploads/2015/02/20150202104522.png" alt="20150202104522"></a></p>
<p>配置4G内存，并且使用过32bit Windows系统的人都知道，虽然自己有4G的物理内存，但是Windows还是明确的告诉你，它只会用其中的3GB多，还有几百MB物理内存是用不到的，即使你开启了PAE。当然如果你用的服务器系统，那就当我没说。至于微软为啥服务端32bit系统可以用4GB以上，而限制普通客户端系统，按照Windows Internals的说法，是为了考虑驱动程序的兼容性问题。我这里想介绍的是，如何使用这些没有使用的物理内存。</p>
<p><a href="/uploads/2015/02/20150202105145.png"><img src="/uploads/2015/02/20150202105145.png" alt="20150202105145"></a></p>
<p>首先，要想使用这些内存，我们必须找到他们，但是找到他们之前，我们还得了解物理内存地址是怎么分配。物理内存地址除了要给RAM提供地址之外，还需要给设备内存提供地址。为了考虑驱动的兼容性，这些设备内存被分配到4G以内的地址上，这样一来，就会有部分RAM不得不分配到4G以外的地址上了，所以我们无法使用它们。</p>
<p><a href="/uploads/2015/02/20150202110332.png"><img src="/uploads/2015/02/20150202110332.png" alt="20150202110332"></a></p>
<p>知道了这些，我们就需要聚焦到如何访问超过4GB内存的方法上了。不过方法也很简单，就是MmMapIoSpace函数，这个函数可以访问64bit的物理内存地址，并且将其映射到我们可以访问的虚拟内存上。</p>
<p>说到这里，程序的代码仿佛就呈现在脑海了，不过等等，还忽略了一个最困难的问题！到底有存在多少RAM内存在4GB以上的地址空间呢？说这个问题最为困难，是因为你需要根据不同的情况做出不同的选择。</p>
<p><a href="/uploads/2015/02/20150202095553.png"><img src="/uploads/2015/02/20150202095553.png" alt="20150202095553"></a></p>
<p>1.主板支持通过Bios查询RAM内存分配情况，在这种情况下，我们可以调用中断来获得最真实的RAM分配表。<br>2.主板不支持通过Bios查询RAM内存分配情况，那么我们很无奈的必须采用一个简单粗暴的方法，Write &amp; Test来获得4GB以外到底有多少RAM可用。  </p>
<p>对于第二种情况，我们的做法是通过MmMapIoSpace函数，把4GB以上的物理地址逐一映射到虚拟内存中，然后写入特殊值，写入后马上读取，看是否写入成功，成功则证明RAM可用。<br>对于第一种情况，这里又要分为两个分支：<br>首先你的系统是NT6内核以下的情况，这时可以调用Ke386CallBios函数，调用中断接口。<br>而对于NT6的内核，我们需要调用新的x86BiosCall等一套函数。<br>需要调用的中断函数是0x15以及AX=E820，通过这个中断和功能号，我们就能获得SYSTEM MEMORY MAP  </p>
<p>下面附带上这个功能的使用方法<br><pre><code>INT 15 - newer BIOSes - GET SYSTEM MEMORY MAP  
   AX = E820h  
   EAX = 0000E820h  
   EDX = 534D4150h (&#39;SMAP&#39;)  
   EBX = continuation value or 00000000h to start at beginning of map  
   ECX = size of buffer for result, in bytes (should be &gt;= 20 bytes)  
   ES:DI -&gt; buffer for result (see #00581)  
Return: CF clear if successful  
    EAX = 534D4150h (&#39;SMAP&#39;)  
    ES:DI buffer filled  
    EBX = next offset from which to copy or 00000000h if all done  
    ECX = actual length returned in bytes  
   CF set on error  
    AH = error code (86h) (see #00496 at INT 15&#x2F;AH=80h)  
Notes:   originally introduced with the Phoenix BIOS v4.0, this function is  
    now supported by most newer BIOSes, since various versions of Windows  
    call it to find out about the system memory  
   a maximum of 20 bytes will be transferred at one time, even if ECX is  
    higher; some BIOSes (e.g. Award Modular BIOS v4.50PG) ignore the  
    value of ECX on entry, and always copy 20 bytes  
   some BIOSes expect the high word of EAX to be clear on entry, i.e.  
    EAX=0000E820h  
   if this function is not supported, an application should fall back  
    to AX=E802h, AX=E801h, and then AH=88h  
   the BIOS is permitted to return a nonzero continuation value in EBX  
    and indicate that the end of the list has already been reached by  
    returning with CF set on the next iteration  
   this function will return base memory and ISA&#x2F;PCI memory contiguous  
    with base memory as normal memory ranges; it will indicate  
    chipset-defined address holes which are not in use and motherboard  
    memory-mapped devices, and all occurrences of the system BIOS as  
    reserved; standard PC address ranges will not be reported  
SeeAlso: AH=C7h,AX=E801h&quot;Phoenix&quot;,AX=E881h,MEM xxxxh:xxx0h&quot;ACPI&quot;  
Format of Phoenix BIOS system memory map address range descriptor:  
Offset   Size   Description   (Table 00580)  
00h   QWORD   base address  
08h   QWORD   length in bytes  
10h   DWORD   type of address range (see #00581)  
(Table 00581)  
Values for System Memory Map address type:  
01h   memory, available to OS  
02h   reserved, not available (e.g. system ROM, memory-mapped device)  
03h   ACPI Reclaim Memory (usable by OS after reading ACPI tables)  
04h   ACPI NVS Memory (OS is required to save this memory between NVS  
    sessions)  
other   not defined yet -- treat as Reserved  
（from http:&#x2F;&#x2F;www.ctyme.com&#x2F;intr&#x2F;rb-1741.htm</code></pre></p>
<p>获得了4GB内存以上的RAM范围以后，再加上MmMapIoSpace，我们就能够访问系统没有使用的内存了。</p>
<p>说了这么多，这个有什么具体应用呢？我见过最多利用这个特性做的产品就是内存盘了。也没看到什么用的特别好的其他应用的方面，我想原因主要有三点，第一，即使获得了物理内存，最后还是映射了4GB以内的虚拟内存上，内存操作终究无法访问直接更多物理内存；第二，这部分内存没有系统统一管理，同类型的软件无法共存；第三，有4G内存赶紧快去换个64位系统吧=v=。</p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-02-02T06:43:30.000Z" itemprop="datePublished">2015-02-02</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/NTInternals/' title=''>NTInternals</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
                  <article id="post-e58886e4baabssd-trime4bba3e7a081" class="repo-list">
    <div class="repo-list-item" >
      <h3 class="repo-list-name" itemprop="name">
        
  
      <a class="article-title" href="/2015/01/31/e58886e4baabssd-trime4bba3e7a081/">分享SSD TRIM代码</a>
  

      </h3>
      <div class="repo-list-description">
        
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>14年的早些时候发布过<a href="/tips/2014/02/11/ssd-trime58a9fe883bde79a84e4b880e4ba9be8aeb0e5bd95.html">SSD TRIM技术的文章</a>，文章里面记录了关于TRIM技术的一些东西，其中就包括在Windows上如何使用TRIM。当然Windows 7及其更高版本的系统都是自带TRIM功能的，只有XP没有这个功能，当时我就写了个工具，在XP下进行TRIM。现在想想确实也没啥意思，就把代码分享说来吧。</p>
<p><a href="https://github.com/0cch/SSDTrim.git" target="_blank" rel="external">https://github.com/0cch/SSDTrim.git</a></p>

        
      </div>
      <p class="repo-list-meta">
        <span class="meta-info">
          <span class="octicon octicon-calendar"></span>
           <time datetime="2015-01-31T08:13:07.000Z" itemprop="datePublished">2015-01-31</time>
        </span>

        
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href='/categories/Tips/' title=''>Tips</a>
          </span>
        
      
        <!--
          
        -->

      </p>
    </div>
  </article>
            
        </div>
        <div class="column one-third">
          <!--处理未安装 search 插件 默认 Google 搜索-->
 

<h3>Search</h3>

<div id="site_search">

	<!-- Google -->
	
		<form action="http://www.google.com/search?" data-site="http://0cch.com">
	    	<input type="text" id="search_box" name="q" placeholder="Search">
	    	<button type="button" class="btn btn-default" id="site_search_do"><span class="octicon octicon-search"></span></button>
	    </form>
	

	<!-- 本地搜索 -->
	

</div>

<h3>Popular Repositories</h3>
    <div class="popular-container"></div>
    
    <script type="text/template" id="popular-list-template">
        <a href="{%=clone_url%}" class="card text-center" target="_blank">
            <div class="thumbnail">
                <div class="card-image geopattern" data-pattern-id="{%=name%}">
                    <div class="card-image-cell">
                        <h3 class="card-title">
                            {%=name%}
                        </h3>
                    </div>
                </div>
                <div class="caption">
                    <div class="card-description">
                        <p class="card-text">
                            {%=description%}
                        </p>
                    </div>
                    <div class="card-text">
                        <span class="meta-info tooltipped tooltipped-n" aria-label="{%=stargazers_count%} stars">
                            <span class="octicon octicon-star"></span> {%=stargazers_count%}
                        </span>
                        <span class="meta-info tooltipped tooltipped-n" aria-label="{%=forks_count%} forks">
                            <span class="octicon octicon-git-branch"></span> {%=forks_count%}
                        </span>
                        <span class="meta-info tooltipped tooltipped-n" aria-label="最后更新时间：{%=updated_at%}">
                            <span class="octicon octicon-clock"></span>
                            <time datetime="{%=updated_at%}">{%=updated_at%}</time>
                        </span>
                    </div>
                </div>
            </div>
        </a>
    </script>

    <script src="/js/baiduTemplate.js"></script>
    <script type="text/javascript">
        var popular_repos = function(){

            var baiduTpl = new Object();

            var handleTpl = function(){
                baiduTpl.popular_list = baidu.template("popular-list-template");
            };

            var handleGithub = function(){
                var popularContainer = $(".popular-container");

                var repos = "0cchext,luadbg".split(",");
                for(var i in repos){
                    var name = repos[i];
                    $.get("https://api.github.com/repos/0cch/"+name,handle);
                }

                function handle(result){
                    result.updated_at = result.updated_at.split("T")[0];
                    if(result){
                        var html = baiduTpl.popular_list(result);
                        popularContainer.append(html);
                        $(".geopattern").each(function(){           
                            $(this).geopattern($(this).data('pattern-id'));
                        });
                    }
                }
            };

            return {
                init:function(){
                    handleTpl();
                    handleGithub();
                }
            }
        }; 
        $(popular_repos().init);
    </script>


    <h3>Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">February 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">September 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">March 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/06/">June 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a></li></ul>
    </div>
  </div>


        </div>
    </div>

    
      <div class="pagination text-align">
          <div class="btn-group">
              <a class="extend prev" rel="prev" href="/archives/2015/">&laquo;</a><a class="page-number" href="/archives/2015/">1</a><span class="page-number current">2</span><a class="page-number" href="/archives/2015/page/3/">3</a><a class="extend next" rel="next" href="/archives/2015/page/3/">&raquo;</a>
          </div>
      </div>
    
</section>

<footer class="container">
    <div class="site-footer" role="contentinfo">
        
        <ul class="site-footer-links right mobile-hidden">
            <li>
                <a href="javascript:window.scrollTo(0,0)" >TOP</a>
            </li>
        </ul>

        <ul class="site-footer-links mobile-hidden">
            
                  
                  <li>
                    <a href="/"  title="Home">Home</a>
                  </li>
            
                  
                  <li>
                    <a href="/categories/"  title="Category">Category</a>
                  </li>
            
                  
                  <li>
                    <a href="/open-source/"  title="Open-Source">Open-Source</a>
                  </li>
            
            <li>
                <a href="/atom.xml">
                    <span class="octicon octicon-rss" style="color:orange;"></span>
                </a>
            </li>
        </ul>
    </div>
</footer>

		<script src="/js/geopattern.js"></script>
		<script src="/js/highlight.pack.js"></script>
		<script src="/lib/fancybox/jquery.fancybox-1.3.4.pack.js"></script>

		

		<script src="/js/index.js"></script>

		 <script src="/js/popular_repo.js"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --> 

	</body>
</html>